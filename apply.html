<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UFT-8">
    <meta name="author" content="Cleveland, Hayden, Tim, Aliana">
    <meta name="description" content=" We are the modern samurai">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:image" content="Url to an image">
    <meta property="og:title" content=" Espada ">
    <meta property="og:description" content=" Security Firm ">

    <title>Espada - Jobs</title>
    <link rel="stylesheet" href="style.css">

    <link rel="shortcut icon" href="logo.png"
        type="image/x-icon">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">

    <style>
        button {
            border-radius: 0.5em;
            border: none;
            outline: none;
            background-color: var(--red);
            color: white;
            padding: 10px;

            transition: all 0.3s;
        }

        button:hover {
            background-color: rgb(209, 0, 0);
        }

        ol {
            margin-left: 29px;
        }
    </style>
</head>

<body onload="loadJob()">
    <span id="top"></span>
    <header>
        <div class="logo">
            <img src="logo.png" alt="Logo image.">
            <div class="title" id="title">
                <h1>ESPADA</h1>
                <p>We are the modern samurai</p>
            </div>
        </div>

        <div class="nav">
            <ul>
                <li><a href="index.html" title="Return home.">HOME</a></li>
                <li><a href="services.html" title="Hire us.">SERVICES</a></li>
                <li><a href="jobs.html" title="Get hired.">JOBS</a></li>
            </ul>
        </div>
    </header>

    <main>
        <div class="special-header">
            <h1>Application</h1>
            <h2 id="jobtitle">Loading job info...</h2>
        </div>

        <!-- Application data -->
        <br>
        <h2>Job Info</h2>
        <div class="jobinfo" id="jobinfo">

        </div>

        <br>

        <h3>Requirements Confirmation</h3>
        <label for="checkbox"><span style="color: red;">*</span><input type="checkbox" name="checkbox" id="checkbox"> I meet all job requirements listed above.</label>
        <p style="color: red;">Note: by clicking the above box you confirm that you meet all requirements for the position you are applying for.</p>
        
        <br>
        
        <h3>Upload a Copy of Your Resumé</h3>
        <p><span style="color: red;">*</span><input type="file" name="resume" id="resume"></p>
        
        <br>

        <h3>Contact Info</h3>
        <p><span style="color: red;">*</span>Email: <input type="email" name="" id="emailinp" placeholder="who@mailsite.com"></p>
        <p>Phone Number: <input type="tel" name="" id="" placeholder="(000) 000-0000"></p>
        <br>
        
        <p><button onclick="submitApp()">Submit Application</button> <span id="warning"></span></p>
        
        <p style="color:red;"><br><span style="color: red;">*</span>required</p>
    </main>

    <footer>
        <p style="float: left;">© 2020 Espada</p>
        <a href="#top" id="bttB">Back to top</a>
    </footer>

    <script src="main.js"></script>
    <script>
        function loadJob() {
            // Get the data from the url and load the job.
            let data = window.location.hash;
            
            // Re-convert html.
            data = data.replace('#', '');
            data = data.replace(/%20/g, " ");
            data = data.replace(/%3C/g, "<");
            data = data.replace(/%3E/g, ">");
            data = data.replace('<br>                <button onclick=%22apply(this)%22>Apply Now!</button>', '');

            console.log(data);
            
            // Seperate the data.
            let dataSet = data.split('||');

            // Load the title.
            document.getElementById("jobtitle").innerText = `For: ${dataSet[0]}`;
            
            // Load that jobs specific data.
            document.getElementById("jobinfo").innerHTML = dataSet[1];
        }

        // Check if everything is filled out and submit.
        function submitApp() {
            // Get the output for the display of the message.
            const successThing = document.getElementById("warning");
            if (!document.getElementById('checkbox').checked) {
                // No confirmation.
                warning.innerText = "Requirements confirmation not acknowledged."
                warning.style.color = "red";
            } else if (document.getElementById("resume").files.length == 0) {
                // We are missing a file.
                warning.innerText = "No resumé file uploaded."
                warning.style.color = "red";
            } else if (document.getElementById('emailinp').value == "" || document.getElementById('emailinp').value == " ") {
                // No email address was given.
                warning.innerText = "No email address was given."
                warning.style.color = "red";
            } else {
                // Everything is ok. We submit the application.
                warning.innerHTML = "<br>Successfully submitted application. We will get back to you soon. You may now close this page..."
                warning.style.color = "green";
            }
        }
    </script>
</body>

</html>